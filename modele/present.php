<?php
$presences = array(
        array(
            "prenom" => "Aminata",
            "nom" => "Diop",
            "date_naissance" => "1998-05-15",
            "lieu_naissance" => "Dakar",
            "mail" => "aminata.diop@example.com",
            "numero" => "771234567",
            "referentiel" => "devweb",
            "matricule" => "P6_DEVWEB_2024_1",
            "statut" => "present",
            "sex" => "M",
            "heure_arrivee" => "08:10",
            "retard" => 5,
            "jour" => "2024-04-09"
        ),
        array(
            "nom" => "Sow",
            "prenom" => "Mamadou",
            "date_naissance" => "1997-08-20",
            "lieu_naissance" => "Thiès",
            "mail" => "mamadou.sow@example.com",
            "numero" => "776543210",
            "referentiel" => "devdata",
            "matricule" => "P6_DEVDAT_2024_2",
            "statut" => "present",
            "sex" => "M",
            "heure_arrivee" => "08:20",
            "retard" => 5,
            "jour" => "2024-04-09"
        ),
        array(
            "prenom" => "Fatou",
            "nom" => "Ndiaye",
            "date_naissance" => "1999-03-10",
            "lieu_naissance" => "Saint-Louis",
            "mail" => "fatou.ndiaye@example.com",
            "numero" => "778765432",
            "referentiel" => "refdig",
            "matricule" => "P6_REFDIG_2024_3",
            "statut" => "absent",
            "sex" => "M",
            "jour" => "2024-04-09"
        ),
        array(
            "prenom" => "Oumar",
            "nom" => "Diallo",
            "date_naissance" => "1997-09-25",
            "lieu_naissance" => "Ziguinchor",
            "mail" => "oumar.diallo@example.com",
            "numero" => "778765432",
            "referentiel" => "devweb",
            "matricule" => "P6_DEVWEB_2024_6",
            "statut" => "present",
            "sex" => "M",
            "heure_arrivee" => "08:00",
            "retard" => 0,
            "jour" => "2024-04-09"
        ),
        array(
            "prenom" => "Aïssatou",
            "nom" => "Niang",
            "date_naissance" => "1998-04-12",
            "lieu_naissance" => "Louga",
            "mail" => "aissatou.niang@example.com",
            "numero" => "776543219",
            "referentiel" => "devdata",
            "matricule" => "P6_DEVDAT_2024_7",
            "statut" => "present",
            "sex" => "M",
            "heure_arrivee" => "08:25",
            "retard" => 10,
            "jour" => "2024-04-09"
        ),
        array(
            "prenom" => "Moussa",
            "nom" => "Camara",
            "date_naissance" => "1999-06-30",
            "lieu_naissance" => "Kolda",
            "mail" => "moussa.camara@example.com",
            "numero" => "771234568",
            "referentiel" => "refdig",
            "matricule" => "P6_REFDIG_2024_8",
            "statut" => "present",
            "sex" => "M",
            "heure_arrivee" => "08:10",
            "retard" => 5,
            "jour" => "2024-04-09"
        ),
        array(
            "prenom" => "Rokhaya",
            "nom" => "Drame",
            "date_naissance" => "1996-12-15",
            "lieu_naissance" => "Tambacounda",
            "mail" => "rokhaya.drame@example.com",
            "numero" => "776543217",
            "referentiel" => "aws",
            "matricule" => "P6_AWS_2024_9",
            "statut" => "present",
            "sex" => "M",
            "heure_arrivee" => "08:30",
            "retard" => 15,
            "jour" => "2024-07-04"
        ),
        array(
            "prenom" => "Abdoulaye",
            "nom" => "Gueye",
            "date_naissance" => "2000-03-20",
            "lieu_naissance" => "Fatick",
            "mail" => "abdoulaye.gueye@example.com",
            "numero" => "777654320",
            "referentiel" => "hackeuse",
            "matricule" => "P6_HACKEUSE_2024_10",
            "statut" => "absent",
            "sex" => "M",
            "jour" => "2024-07-04"
        ),
        array(
            "prenom" => "Aminata",
            "nom" => "Traoré",
            "date_naissance" => "1997-08-10",
            "lieu_naissance" => "Dakar",
            "mail" => "aminata.traore@example.com",
            "numero" => "778765433",
            "referentiel" => "devweb",
            "matricule" => "P6_DEVWEB_2024_11",
            "statut" => "absent",
            "sex" => "M",
            "jour" => "2024-07-04"
        ),
        array(
            "prenom" => "Mamadou",
            "nom" => "Dabo",
            "date_naissance" => "1998-02-28",
            "lieu_naissance" => "Thiès",
            "mail" => "mamadou.dabo@example.com",
            "numero" => "776543211",
            "referentiel" => "devdata",
            "matricule" => "P6_DEVDAT_2024_12",
            "statut" => "present",
            "sex" => "M",
            "heure_arrivee" => "08:10",
            "retard" => 5,
            "jour" => "2024-04-09"
        ),
        array(
            "prenom" => "Fatou",
            "nom" => "Fall",
            "date_naissance" => "1999-11-05",
            "lieu_naissance" => "Saint-Louis",
            "mail" => "fatou.fall@example.com",
            "numero" => "771234569",
            "referentiel" => "refdig",
            "matricule" => "P6_REFDIG_2024_13",
            "statut" => "absent",
            "sex" => "M",
            "jour" => "2024-04-09"
        ),
        array(
            "prenom" => "Cheikh",
            "nom" => "Kane",
            "date_naissance" => "1996-10-18",
            "lieu_naissance" => "Kaolack",
            "mail" => "cheikh.kane@example.com",
            "numero" => "776543219",
            "referentiel" => "aws",
            "matricule" => "P6_AWS_2024_14",
            "statut" => "present",
            "sex" => "M",
            "heure_arrivee" => "08:45",
            "retard" => 30,
            "jour" => "2024-07-06"
        ),
        array(
            "prenom" => "Khady",
            "nom" => "Diallo",
            "date_naissance" => "2000-01-10",
            "lieu_naissance" => "Touba",
            "mail" => "khady.diallo@example.com",
            "numero" => "777654322",
            "referentiel" => "hackeuse",
            "matricule" => "P6_HACKEUSE_2024_15",
            "statut" => "absent",
            "sex" => "M",
            "jour" => "2024-07-08"
        )
        ,
        array(
            "prenom" => "Cheikh",
            "nom" => "Kane",
            "date_naissance" => "1996-10-18",
            "lieu_naissance" => "Kaolack",
            "mail" => "cheikh.kane@example.com",
            "numero" => "776543219",
            "referentiel" => "aws",
            "matricule" => "P6_AWS_2024_14",
            "statut" => "absent",
            "sex" => "M",
            "heure_arrivee" => "08:45",
            "retard" => 30,
            "jour" => "2024-07-05"
        ),
    );
    $eleByPage=2;
                $pageEtu = $_GET['pageAff'] ?? 1;

if(isset($_POST["statut"]))
$_SESSION['affichePresence'] = $_REQUEST;

function filtrerPresences($presences) {
    
    $sess=$_SESSION["affichePresence"];
    $statut_filtre = $sess['statut'];
    $referentiel_filtre = $sess['referentiel'] ;
    $date_filtre = $sess['jour'];
    return ($statut_filtre == "" || $presences["statut"] == $statut_filtre) &&
           ($referentiel_filtre == "" ||  $presences["referentiel"] == $referentiel_filtre) &&
           ($date_filtre == "" || $presences["jour"] == $date_filtre);
}

        $listeFiltre = array_filter($presences, 'filtrerPresences');

        $totalPage=ceil(count($listeFiltre)/$eleByPage);

        if($pageEtu<1 || $pageEtu>$totalPage)
        $pageEtu= 0;
        $eleDeb = ($pageEtu-1)*$eleByPage;
        $etudiantsPage = array_slice($listeFiltre, $eleDeb, $eleByPage); //array_slice() permet de copier un partie d'un tableau dans un nouveau tableau on donne juste le nombre
                

